<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>13. TACTIC Python Client API Reference</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="TACTIC Developer" /><link rel="up" href="index.html" title="TACTIC Developer" /><link rel="prev" href="ar01s12.html" title="12. Conventions" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="ar01s12.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> </td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_tactic_python_client_api_reference"></a>13. TACTIC Python Client API Reference</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_init"></a>13.1. __init__</h3></div></div></div><p><span class="strong"><strong>__init__(login=None, setup=True, protocol=None, server=None, project=None, ticket=None, user=None, password="")</strong></span></p><p>Initialize the TacticServerStub</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>login</strong></span> - login_code</p><p><span class="strong"><strong>setup</strong></span> - if set to True, it runs the protocol set-up</p><p><span class="strong"><strong>protocol</strong></span> - xmlrpc or local. it defaults to xmlrpc</p><p><span class="strong"><strong>server</strong></span> - tactic server</p><p><span class="strong"><strong>project</strong></span> - targeted project</p><p><span class="strong"><strong>ticket</strong></span> - login ticket key</p><p><span class="strong"><strong>user</strong></span> - tactic login_code that overrides the login</p><p><span class="strong"><strong>password</strong></span> - password for login</p><p><span class="strong"><strong>site</strong></span> - site for portal set-up</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_protocol"></a>13.2. get_protocol</h3></div></div></div><p><span class="strong"><strong>get_protocol()</strong></span></p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - local or xmlrpc</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_login_ticket"></a>13.3. set_login_ticket</h3></div></div></div><p><span class="strong"><strong>set_login_ticket(ticket)</strong></span></p><p>Set the login ticket with the ticket key</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_project"></a>13.4. set_project</h3></div></div></div><p><span class="strong"><strong>set_project(project_code)</strong></span></p><p>Set the project code</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_protocol"></a>13.5. set_protocol</h3></div></div></div><p><span class="strong"><strong>set_protocol()</strong></span></p><p><span class="strong"><strong>params</strong></span></p><p><span class="strong"><strong>string</strong></span> - local or xmlrpc</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_server"></a>13.6. set_server</h3></div></div></div><p><span class="strong"><strong>set_server(server_name)</strong></span></p><p>Set the server name for this XML-RPC server</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_site"></a>13.7. set_site</h3></div></div></div><p><span class="strong"><strong>set_site(site=None)</strong></span></p><p>Set the site applicable in a portal setup</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_abort"></a>13.8. abort</h3></div></div></div><p><span class="strong"><strong>abort(ignore_files=False)</strong></span></p><p>Abort the transaction.  This undos all commands that occurred
from the beginning of the transactions</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>ignore_files: (boolean)</strong></span> - determines if any files moved into the</p><p>repository are left as is.  This is useful for very long processes</p><p>where it is desireable to keep the files in the repository</p><p>even on abort.</p><p><span class="strong"><strong>example:</strong></span></p><p>A full transaction inserting 10 shots.  If an error occurs, all 10</p><p>inserts will be aborted.</p><pre class="programlisting">        server.start('Start adding shots')

        try:

            for i in range(0,10):

                server.insert("prod/shot", { 'code': 'XG%0.3d'%i } )

        except:

            server.abort()

        else:

            server.finish("10 shots added")</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_config_element"></a>13.9. add_config_element</h3></div></div></div><p><span class="strong"><strong>add_config_element(search_type, view, name, class_name=None, display_options={},  action_class_name=None, action_options={}, element_attrs={},login=None,  unique=True, auto_unique_name=False, auto_unique_view=False)</strong></span></p><p>This method adds an element into a config.  It is used by various
UI components to add new widget element to a particular view.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the search type that this config belongs to</p><p><span class="strong"><strong>view</strong></span> - the specific view of the search type</p><p><span class="strong"><strong>name</strong></span> - the name of the element</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>class_name</strong></span> - the fully qualified class of the display</p><p><span class="strong"><strong>action_class_name</strong></span> - the fully qualified class of the action</p><p><span class="strong"><strong>display_options</strong></span> - keyward options in a dictionary to construct the specific display</p><p><span class="strong"><strong>action_options</strong></span> - keyward options in a dictionary to construct the specific action</p><p><span class="strong"><strong>element_attrs</strong></span> - element attributes in a dictionary</p><p><span class="strong"><strong>login</strong></span> - login name if it is for a specific user</p><p><span class="strong"><strong>unique</strong></span> - add an unique element if True. update the element if False.</p><p><span class="strong"><strong>auto_unique_name</strong></span> - auto generate a unique element and display view name</p><p><span class="strong"><strong>auto_unique_view</strong></span> - auto generate a unique display view name</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>boolean</strong></span> - True</p><p><span class="strong"><strong>example:</strong></span></p><p>This will add a new element to the "character" view for a 3D asset</p><pre class="programlisting">        search_type = 'prod/asset'

        view = 'characters'

        class_name = 'tactic.ui.common.SimpleElementWdg'

        server.add_config_element(search_type, view, class_name)</pre><p>This will add a new element named "user" to the "definition" view. It contains detailed display and action nodes</p><pre class="programlisting">        data_dict = {} # some data here

        search_type = 'prod/asset'

        server.add_config_element(search_type, 'definition', 'user',  class_name = data_dict['class_name'], display_options=data_dict['display_options'], element_attrs=data_dict['element_attrs'], unique=True, action_class_name=data_dict['action_class_name'], action_options=data_dict['action_options'])</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_dependency"></a>13.10. add_dependency</h3></div></div></div><p><span class="strong"><strong>add_dependency(snapshot_code, file_path, type=<span class="emphasis"><em>ref</em></span>)</strong></span></p><p>Append a dependency referent to an existing check-in.
All files are uniquely containe by a particular snapshot.  Presently,
this method does a reverse lookup by file name.  This assumes that
the filename is unique within the system, so it is not recommended
unless it is known that naming conventions will produce unique
file names for every this particular file.  If this is not the
case, it is recommended that add_dependency_by_code() is used.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code identifier of a snapshot</p><p><span class="strong"><strong>file_path</strong></span> - the path of the dependent file.  This function is able</p><p>reverse map the file_path to the appropriate snapshot</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>type</strong></span> - type of dependency.  Values include <span class="emphasis"><em>ref</em></span> and <span class="emphasis"><em>input_ref</em></span></p><p>ref = hierarchical reference:   ie A contains B</p><p>input_ref = input reference:    ie: A was used to create B</p><p><span class="strong"><strong>tag</strong></span> - a tagged keyword can be added to a dependency to categorize</p><p>the different dependencies that exist in a snapshot</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the resulting snapshot</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_dependency_by_code"></a>13.11. add_dependency_by_code</h3></div></div></div><p><span class="strong"><strong>add_dependency_by_code(to_snapshot_code, from_snapshot_code, type=<span class="emphasis"><em>ref</em></span>)</strong></span></p><p>Append a dependency reference to an existing checkin.  This dependency
is used to connect various checkins together creating a separate
dependency tree for each checkin.</p><p><span class="strong"><strong>param:</strong></span></p><p>to_snapshot_code: the snapshot code which the dependency will be</p><p>connected to</p><p>from_snapshot_code: the snapshot code which the dependency will be</p><p>connected from</p><p><span class="strong"><strong>type</strong></span> - type of dependency.  Values include <span class="emphasis"><em>ref</em></span> and <span class="emphasis"><em>input_ref</em></span></p><p>ref = hierarchical reference:   ie A contains B</p><p><span class="strong"><strong>input_ref</strong></span> - input reference:    ie: A was used to create B</p><p><span class="strong"><strong>tag</strong></span> - a tagged keyword can be added to a dependency to categorize</p><p>the different dependencies that exist in a snapshot</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the resulting snapshot</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_directory"></a>13.12. add_directory</h3></div></div></div><p><span class="strong"><strong>add_directory(snapshot_code, dir, file_type=<span class="emphasis"><em>main</em></span>, mode="copy", dir_naming=<span class="emphasis"><em>', file_naming=</em></span>')</strong></span></p><p>Add a full directory to an already existing checkin.
This informs TACTIC to treat the entire directory as single entity
without regard to the structure of the contents.  TACTIC will not
know about the individual files and the directory hierarchy within
the base directory and it it left up to the and external program
to intepret and understand this.</p><p>This is often used when logic on the exact file structure exists in
some external source outside of TACTIC and it is deemed to complictaed
to map this into TACTIC’s snapshot definition.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>dir</strong></span> - the directory that needs to be checked in</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>file_type</strong></span> - file type is used more as snapshot type here</p><p><span class="strong"><strong>mode</strong></span> - copy, move, preallocate, manual, inplace</p><p><span class="strong"><strong>dir_naming</strong></span> - explicitly set a dir_naming expression to use</p><p><span class="strong"><strong>file_naming</strong></span> - explicitly set a file_naming expression to use</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - snapshot</p><p><span class="strong"><strong>example:</strong></span></p><p>This will create a new snapshot for a search_key and add a directory using manual mode</p><pre class="programlisting">        dir = 'C:/images'

        handoff_dir = my.server.get_handoff_dir()

        shutil.copytree('%s/subfolder' %dir, '%s/images/subfolder' %handoff_dir)



        snapshot_dict = my.server.create_snapshot(search_key, context='render')

        snapshot_code = snapshot_dict.get('code')

        my.server.add_directory(snapshot_code, dir, file_type='dir', mode='manual')</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_file"></a>13.13. add_file</h3></div></div></div><p><span class="strong"><strong>add_file(snapshot_code, file_path, file_type=<span class="emphasis"><em>main</em></span>, use_handoff_dir=False, mode=None, create_icon=False)</strong></span></p><p>Add a file to an already existing snapshot.  This method is used in
piecewise checkins.  A blank snapshot can be created using
create_snapshot().  This method can then be used to successively
add files to the snapshot.</p><p>In order to check  in the file, the server will need to have access
to these files.  There are a number of ways of getting the files
to the server.  When using copy or move mode, the files are either
copied or moved to the "handoff_dir".  This directory
is an agreed upon directory in which to handoff the files to the
server.  This mode is generally used for checking in user files.
For heavy bandwidth checkins, it is recommended to user preallocated
checkins.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code identifier of a snapshot</p><p><span class="strong"><strong>file_path</strong></span> - path of the file to add to the snapshot.</p><p>Optional: this can also be an array to add multiple files at once.</p><p>This has much faster performance that adding one file at a time.</p><p>Also, note that in this case, file_types must be an array</p><p>of equal size.</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>file_type</strong></span> - type of the file to be added.</p><p>Optional: this can also be an array.  See file_path argument</p><p>for more information.</p><p><span class="strong"><strong>use_handoff_dir</strong></span> - DEPRECATED: (use mode arg) use handoff dir to checkin</p><p>file.  The handoff dir is an agreed upon directory between the</p><p>client and server to transfer files.</p><p><span class="strong"><strong>mode - upload|copy|move|manual|inplace</strong></span> - determine the protocol which delievers</p><p>the file to the server.</p><p><span class="strong"><strong>create_icon</strong></span> - (True|False) determine whether to create an icon for</p><p>this appended file.  Only 1 icon should be created for each</p><p>snapshot.</p><p><span class="strong"><strong>dir_naming</strong></span> - explicitly set a dir_naming expression to use</p><p><span class="strong"><strong>file_naming</strong></span> - explicitly set a file_naming expression to use</p><p><span class="strong"><strong>checkin_type</strong></span> - auto or strict which controls whether to auto create versionless and adopt some default dir/file naming</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the resulting snapshot</p><p><span class="strong"><strong>example:</strong></span></p><p>This will create a blank model snapshot for character chr001 and</p><p>add a file</p><pre class="programlisting">        search_type = 'prod/asset'

        code = 'chr001'

        search_key = server.build_search_type(search_type, code)

        context = 'model'

        path = "./my_model.ma"



        snapshot = server.create_snapshot(search_key, context)

        server.add_file( snapshot.get('code'), path )</pre><p>Different files should be separated by file type.  For example,</p><p>to check in both a maya and houdin file in the same snapshot:</p><pre class="programlisting">        maya_path = "./my_model.ma"

        houdini_path = "./my_model.hip"



        server.add_file( snapshot_code, maya_path, file_type='maya' )

        server.add_file( snapshot_code, houdini_path, file_type='houdini' )</pre><p>To transfer files by uploading (using http protocol):</p><pre class="programlisting">        server.add_file( snapshot_code, maya_path, mode='upload' )</pre><p>To create an icon for this file</p><pre class="programlisting">        path = 'image.jpg'

        server.add_file( snapshot_code, path, mode='upload', create_icon=True )</pre><p>To add multiple files at once</p><pre class="programlisting">        file_paths = [maya_path, houdini_path]

        file_types ['maya', 'houdini']

        server.add_file( snapshot_code, file_paths, file_types=file_types, mode='upload')</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_group"></a>13.14. add_group</h3></div></div></div><p><span class="strong"><strong>add_group(snapshot_code, file_path, file_type, file_range, use_handoff_dir=False, mode=None)</strong></span></p><p>Add a file range to an already existing snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code identifier of a snapshot</p><p><span class="strong"><strong>file_path</strong></span> - path of the file to add to the snapshot</p><p><span class="strong"><strong>file_type</strong></span> - type of the file to be added.</p><p><span class="strong"><strong>file_range</strong></span> - range with format s-e/b</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>use_handoff_dir</strong></span> - use handoff dir to checkin file</p><p><span class="strong"><strong>mode</strong></span> - one of <span class="emphasis"><em>copy</em></span>,<span class="emphasis"><em>move</em></span>,<span class="emphasis"><em>preallocate</em></span></p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the resulting snapshot</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_initial_tasks"></a>13.15. add_initial_tasks</h3></div></div></div><p><span class="strong"><strong>add_initial_tasks(search_key, pipeline_code=None, processes=[], skip_duplicate=True, offset=0)</strong></span></p><p>Add initial tasks to an sobject</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the key identifying a type of sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>pipeline_code</strong></span> - override the sobject’s pipeline and use this one instead</p><p><span class="strong"><strong>processes</strong></span> - create tasks for the given list of processes</p><p><span class="strong"><strong>skip_duplicate</strong></span> - boolean to skip duplicated task</p><p><span class="strong"><strong>offset</strong></span> - a number to offset the start date from today’s date</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - tasks created</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_build_search_key"></a>13.16. build_search_key</h3></div></div></div><p><span class="strong"><strong>build_search_key(search_type, code, project_code=None, column=<span class="emphasis"><em>code</em></span>)</strong></span></p><p>Convenience method to build a search key from its components.  A
search_key uniquely indentifies a specific sobject.  This string
that is returned is heavily used as an argument in the API to
identify an sobject to operate one</p><p>A search key has the form: "prod/shot?project=bar&amp;code=XG001"
where search_type = "prod/shot", project_code = "bar" and code = "XG001"</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the unique identifier of a search type: ie prod/asset</p><p><span class="strong"><strong>code</strong></span> - the unique code of the sobject</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>project_code</strong></span> - an optional project code.  If this is not</p><p>included, the project from get_ticket() is added.</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - search key</p><p><span class="strong"><strong>example:</strong></span></p><pre class="programlisting">        search_type = "prod/asset"

        code = "chr001"

        search_key = server.build_search_key(search_type, code)

        e.g. search_key = prod/asset?project=code=chr001</pre><pre class="programlisting">        search_type = "sthpw/login"

        code = "admin"

        search_key = server.build_search_key(search_type, code, column='code')

        e.g. search_key = sthpw/login?code=admin</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_build_search_type"></a>13.17. build_search_type</h3></div></div></div><p><span class="strong"><strong>build_search_type(search_type, project_code=None)</strong></span></p><p>Convenience method to build a search type from its components.  It is
a simple method that build the proper format for project scoped search
types.  A full search type has the form:
prod/asset?project=bar.
It uniquely defines a type of sobject in a project.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the unique identifier of a search type: ie prod/asset</p><p><span class="strong"><strong>project_code (optional)</strong></span> - an optional project code.  If this is not</p><p>included, the project from get_ticket() is added.</p><p><span class="strong"><strong>return:</strong></span></p><p>search type string</p><p><span class="strong"><strong>example</strong></span></p><pre class="programlisting">        search_type = "prod/asset"

        full_search_type = server.build_search_type(search_type)</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_checkout"></a>13.18. checkout</h3></div></div></div><p><span class="strong"><strong>checkout(search_key, context, version=-1, file_type=<span class="emphasis"><em>main</em></span>, dir=<span class="emphasis"><em>', level_key=None, to_sandbox_dir=False, mode='copy</em></span>)</strong></span></p><p>Check out files defined in a snapshot from the repository.  This
will copy files to a particular directory so that a user can work
on them.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>context</strong></span> - context of the snapshot</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>version</strong></span> - version of the snapshot</p><p><span class="strong"><strong>file_type</strong></span> - file type defaults to <span class="emphasis"><em>main</em></span>. If set to <span class="emphasis"><em>*</em></span>, all paths are checked out</p><p><span class="strong"><strong>level_key</strong></span> - the unique identifier of the level in the form of a search key</p><p><span class="strong"><strong>to_dir</strong></span> - destination directory defaults to <span class="emphasis"><em>.</em></span></p><p><span class="strong"><strong>to_sandbox_dir</strong></span> - (True|False) destination directory defaults to</p><p>sandbox_dir (overrides "to_dir" arg)</p><p><span class="strong"><strong>mode - (copy|download)</strong></span> - determines the protocol that will be used</p><p>to copy the files to the destination location</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - a list of paths that were checked out</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_clear_upload_dir"></a>13.19. clear_upload_dir</h3></div></div></div><p><span class="strong"><strong>clear_upload_dir()</strong></span></p><p>Clear the upload directory to ensure clean checkins</p><p><span class="strong"><strong>param:</strong></span></p><p>None</p><p><span class="strong"><strong>keyparam:</strong></span></p><p>None</p><p><span class="strong"><strong>return:</strong></span></p><p>None</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_connect_sobjects"></a>13.20. connect_sobjects</h3></div></div></div><p><span class="strong"><strong>connect_sobjects(src_sobject, dst_sobject, context=<span class="emphasis"><em>default</em></span>)</strong></span></p><p>Connect two sobjects together</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>src_sobject</strong></span> - the original sobject from which the connection starts</p><p><span class="strong"><strong>dst_sobject</strong></span> - the sobject to which the connection connects to</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>context</strong></span> - an arbirarty parameter which defines type of connection</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the last connection sobject created</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_create_search_type"></a>13.21. create_search_type</h3></div></div></div><p><span class="strong"><strong>create_search_type(search_type, title, description="", has_pipeline=False)</strong></span></p><p>Create a new search type</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - Newly defined search_type</p><p><span class="strong"><strong>title</strong></span> - readable title to display this search type as</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>description</strong></span> - a brief description of this search type</p><p><span class="strong"><strong>has_pipeline</strong></span> - determines whether this search type goes through a</p><p>pipeline.  Simply puts a pipeline_code column in the table.</p><p><span class="strong"><strong>return</strong></span></p><p><span class="strong"><strong>string</strong></span> - the newly created search type</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_create_snapshot"></a>13.22. create_snapshot</h3></div></div></div><p><span class="strong"><strong>create_snapshot(search_key, context, snapshot_type="file", description="No description", is_current=True, level_key=None, is_revision=False, triggers=True )</strong></span></p><p>Create an empty snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>context</strong></span> - the context of the checkin</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>snapshot_type</strong></span> - [optional] descibes what kind of a snapshot this is.</p><p>More information about a snapshot type can be found in the</p><p>prod/snapshot_type sobject</p><p><span class="strong"><strong>description</strong></span> - [optional] optional description for this checkin</p><p><span class="strong"><strong>is_current</strong></span> - flag to determine if this checkin is to be set as current</p><p><span class="strong"><strong>is_revision</strong></span> - flag to set this as a revision instead of a version</p><p><span class="strong"><strong>level_key</strong></span> - the unique identifier of the level that this</p><p>is to be checked into</p><p><span class="strong"><strong>triggers</strong></span> - boolean to fire triggers on insert</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - representation of the snapshot created for this checkin</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_create_task"></a>13.23. create_task</h3></div></div></div><p><span class="strong"><strong>create_task(search_key, process="publish", subcontext=None, description=None, bid_start_date=None, bid_end_date=None, bid_duration=None, assigned=None)</strong></span></p><p>Create a task for a particular sobject</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the key identifying a type of sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>process</strong></span> - process that this task belongs to</p><p><span class="strong"><strong>subcontext</strong></span> - the subcontext of the process (context = procsss/subcontext)</p><p><span class="strong"><strong>description</strong></span> - detailed description of the task</p><p><span class="strong"><strong>bid_start_date</strong></span> - the expected start date for this task</p><p><span class="strong"><strong>bid_end_date</strong></span> - the expected end date for this task</p><p><span class="strong"><strong>bid_duration</strong></span> - the expected duration for this task</p><p><span class="strong"><strong>assigned</strong></span> - the user assigned to this task</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - task created</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_delete_sobject"></a>13.24. delete_sobject</h3></div></div></div><p><span class="strong"><strong>delete_sobject(search_key, include_dependencies=False)</strong></span></p><p>Invoke the delete method.  Note: this function may fail due
to dependencies.  Tactic will not cascade delete.  This function
should be used with extreme caution because, if successful, it will
permanently remove the existence of an sobject</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject.</p><p>Note: this can also be an array.</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>include_dependencies</strong></span> - True/False</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - a sobject that represents values of the sobject in the</p><p>form name:value pairs</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_directory_checkin"></a>13.25. directory_checkin</h3></div></div></div><p><span class="strong"><strong>directory_checkin(search_key, context, dir, snapshot_type="directory", description="No description", file_type=<span class="emphasis"><em>main</em></span>, is_current=True, level_key=None, metadata={}, mode="copy", is_revision=False, checkin_type="strict")</strong></span></p><p>Check in a directory of files.  This informs TACTIC to treat the
entire directory as single entity without regard to the structure
of the contents.  TACTIC will not know about the individual files
and the directory hierarchy within the base directory and it it left
up to the and external program to intepret and understand this.</p><p>This is often used when logic on the exact file structure exists in
some external source outside of TACTIC and it is deemed too complicated
to map this into TACTIC’s snapshot definition.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>dir</strong></span> - the directory that needs to be checked in</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>snapshot_type</strong></span> - type of snapshot this checkin will have</p><p><span class="strong"><strong>description</strong></span> - description related to this checkin</p><p><span class="strong"><strong>file_type</strong></span> - the type of file that will be associated with this group</p><p><span class="strong"><strong>is_current</strong></span> - makes this snapshot current</p><p><span class="strong"><strong>level_key</strong></span> - the search key of the level if used</p><p><span class="strong"><strong>metadata</strong></span> - add metadata to snapshot</p><p><span class="strong"><strong>mode</strong></span> - determines whether the files passed in should be copied, moved</p><p>or uploaded.  By default, this is <span class="emphasis"><em>copy</em></span></p><p><span class="strong"><strong>is_revision</strong></span> - flag to set this as a revision instead of a version</p><p><span class="strong"><strong>checkin_type</strong></span> - auto or strict which controls whether to auto create versionless</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - snapshot</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_download"></a>13.26. download</h3></div></div></div><p><span class="strong"><strong>download(my, url, to_dir=".", filename='', md5_checksum="")</strong></span></p><p>Download a file from a given url</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>url</strong></span> - the url source location of the file</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>to_dir</strong></span> - the directory to download to</p><p><span class="strong"><strong>filename</strong></span> - the filename to download to, defaults to original filename</p><p><span class="strong"><strong>md5_checksum</strong></span> - an md5 checksum to match the file against</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - path of the file donwloaded</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_eval"></a>13.27. eval</h3></div></div></div><p><span class="strong"><strong>eval(expression, search_keys=[], mode=None, single=False, vars={}, show_retired=False)</strong></span></p><p>Evaluate the expression.  This expression uses the TACTIC expression
language to retrieve results.  For more information, refer to the
expression language documentation.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>expression</strong></span> - string expression</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>search_keys</strong></span> - the starting point for the expression.</p><p><span class="strong"><strong>mode - string|expression</strong></span> - determines the starting mode of the expression</p><p><span class="strong"><strong>single - True|False</strong></span> - True value forces a single return value</p><p><span class="strong"><strong>vars</strong></span> - user defined variable</p><p><span class="strong"><strong>show_retired</strong></span> - defaults to False to not return retired items</p><p><span class="strong"><strong>return:</strong></span></p><p>results of the expression.  The results depend on the exact nature</p><p>of the expression.</p><p><span class="strong"><strong>example:</strong></span></p><p>#1. Search for snapshots with context beginning with <span class="emphasis"><em>model</em></span> for the asset with the search key <span class="emphasis"><em>prod/asset?project=sample3d&amp;id=96</em></span></p><pre class="programlisting">        server = TacticServerStub.get()

        exp = "@SOBJECT(sthpw/snapshot['context','EQ','^model'])"

        result = server.eval(exp, search_keys=['prod/asset?project=sample3d&amp;id=96'])</pre><p>Please refer to the expression language documentation for numerous</p><p>examples on how to use the expression language.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_execute_cmd"></a>13.28. execute_cmd</h3></div></div></div><p><span class="strong"><strong>execute_cmd(class_name, args={}, values={})</strong></span></p><p>Execute a command</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>class_name</strong></span> - the fully qualified class name of the widget</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>args</strong></span> - keyword arguments required to create a specific widget</p><p><span class="strong"><strong>values</strong></span> - form values that are passed in from the interface</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - description of command</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_execute_js_script"></a>13.29. execute_js_script</h3></div></div></div><p><span class="strong"><strong>execute_js_script(script_path, kwargs)</strong></span></p><p>Execute a js script defined in Script Editor</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>script_path</strong></span> - script path in Script Editor, e.g. test/eval_sobj</p><p><span class="strong"><strong>keyparam:</strong></span></p><p>*kwargs * - keyword arguments for this script</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - returned data structure</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_execute_pipeline"></a>13.30. execute_pipeline</h3></div></div></div><p><span class="strong"><strong>execute_pipeline(pipeline_xml, package)</strong></span></p><p>Spawn an execution of a pipeline as delivered from
<span class="emphasis"><em>get_pipeline_xml()</em></span>.  The pipeline is a xml document that describes
a set of processes and their handlers</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>pipeline_xml</strong></span> - an xml document describing a standard Tactic pipeline.</p><p><span class="strong"><strong>package</strong></span> - a dictionary of data delivered to the handlers</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>instance</strong></span> - a reference to the interpreter</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_execute_python_script"></a>13.31. execute_python_script</h3></div></div></div><p><span class="strong"><strong>execute_python_script(script_path, kwargs)</strong></span></p><p>Execute a python script defined in Script Editor</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>script_path</strong></span> - script path in Script Editor, e.g. test/eval_sobj</p><p><span class="strong"><strong>keyparam:</strong></span></p><p>*kwargs * - keyword arguments for this script</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - returned data structure</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_finish"></a>13.32. finish</h3></div></div></div><p><span class="strong"><strong>finish()</strong></span></p><p>End the current transaction and cleans it up</p><p><span class="strong"><strong>params:</strong></span></p><p>description: this will be recorded in the transaction log as the</p><p>description of the transction</p><p><span class="strong"><strong>example:</strong></span></p><p>A full transaction inserting 10 shots.  If an error occurs, all 10</p><p>inserts will be aborted.</p><pre class="programlisting">        server.start('Start adding shots')

        try:

            for i in range(0,10):

                server.insert("prod/shot", { 'code': 'XG%0.3d'%i } )

        except:

            server.abort()

        else:

            server.finish("10 shots added")</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_generate_ticket"></a>13.33. generate_ticket</h3></div></div></div><p><span class="strong"><strong>generate_ticket()</strong></span></p><p>Ask the server to generate a ticket explicity used for your own commands</p><p><span class="strong"><strong>return - a string representing the transaction ticket</strong></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_all_children"></a>13.34. get_all_children</h3></div></div></div><p><span class="strong"><strong>get_all_children(search_key, child_type, filters=[], columns=[])</strong></span></p><p>Get all children of a particular child type of an sobject</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>child_type</strong></span> - the search_type of the children to search for</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>filters</strong></span> - extra filters on the query : see query method for examples</p><p><span class="strong"><strong>columns</strong></span> - list of column names to be included in the returned dictionary</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list of dictionary</strong></span> - a list of sobjects dictionaries</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_all_dependencies"></a>13.35. get_all_dependencies</h3></div></div></div><p><span class="strong"><strong>get_all_dependencies(snapshot_code, mode=<span class="emphasis"><em>explicit</em></span>, type=<span class="emphasis"><em>ref</em></span>, include_paths=False, include_paths_dict=False, include_files=False, repo_mode=<span class="emphasis"><em>client_repo</em></span>, show_retired=False):</strong></span></p><p>Retrieve the latest dependent snapshots of the given snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code of the snapshot</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>mode</strong></span> - explicit (get version as defined in snapshot)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
latest
</li><li class="listitem">
current
</li></ul></div><p><span class="strong"><strong>type</strong></span> - one of ref or input_ref</p><p><span class="strong"><strong>include_paths</strong></span> - flag to specify whether to include a <span class="emphasis"><em>paths</em></span> property</p><p>containing all of the paths in the dependent snapshots</p><p><span class="strong"><strong>include_paths_dict</strong></span> - flag to specify whether to include a</p><p><span class="emphasis"><em>paths_dict</em></span> property containing a dict of all paths in the</p><p>dependent snapshots</p><p><span class="strong"><strong>include_files</strong></span> - includes all of the file objects referenced in the</p><p>snapshots</p><p><span class="strong"><strong>repo_mode</strong></span> - client_repo, web, lib, relative</p><p><span class="strong"><strong>show_retired</strong></span> - defaults to False so that it doesn’t show retired dependencies</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - snapshots</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_all_paths_from_snapshot"></a>13.36. get_all_paths_from_snapshot</h3></div></div></div><p><span class="strong"><strong>get_all_paths_from_snapshot(snapshot_code, mode=<span class="emphasis"><em>client_repo</em></span>, expand_paths=False, filename_mode='')</strong></span></p><p>Get all paths from snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code of the snapshot</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>mode</strong></span> - forces the type of folder path returned to use the value from the</p><p>appropriate tactic_&lt;SERVER_OS&gt;-conf.xml configuration file.</p><p>Values include <span class="emphasis"><em>lib</em></span>, <span class="emphasis"><em>web</em></span>, <span class="emphasis"><em>local_repo</em></span>, <span class="emphasis"><em>sandbox</em></span>, <span class="emphasis"><em>client_repo</em></span>, <span class="emphasis"><em>relative</em></span></p><p>lib = the NFS asset directory from the server point of view</p><p>web = the http asset directory from the client point of view</p><p>local_repo = the local sync of the TACTIC repository</p><p>sandbox = the local sandbox (work area) designated by TACTIC</p><p>client_repo (default) = the asset directory from the client point of view</p><p>If there is no value for win32_client_repo_dir or linux_client_repo_dir</p><p>in the config, then the value for asset_base_dir will be used instead.</p><p>relative = the relative direcory without any base</p><p><span class="strong"><strong>expand_paths</strong></span> - expand the paths of a sequence check-in or for a directory check-in, it will list the contents of the directory as well</p><p><span class="strong"><strong>filename_mode</strong></span> - source or '', where source reveals the source_path of the check-in</p><p><span class="strong"><strong>file_types</strong></span> - list: only return files in snapshot with these types</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - paths</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_by_code"></a>13.37. get_by_code</h3></div></div></div><p><span class="strong"><strong>get_by_code(search_type, search_code)</strong></span></p><p>Get the info on an sobject based on search code</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the search_type of the sobject to search for</p><p><span class="strong"><strong>code</strong></span> - the code of the sobject to search for</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>sobject</strong></span> - a dictionary that represents values of the sobject in the</p><p>form name/value pairs</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_by_search_key"></a>13.38. get_by_search_key</h3></div></div></div><p><span class="strong"><strong>get_by_search_key(search_key)</strong></span></p><p>Get the info on an sobject based on search key
<span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the key identifying a type of sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list of dictionary</strong></span> - sobjects that represent values of the sobject in the</p><p>form of name:value pairs</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_child_types"></a>13.39. get_child_types</h3></div></div></div><p><span class="strong"><strong>get_child_types(search_key)</strong></span></p><p>Get all the child search types</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - the child search types</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_client_api_version"></a>13.40. get_client_api_version</h3></div></div></div><p><span class="strong"><strong>get_client_api_version()</strong></span></p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - client api version</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_client_dir"></a>13.41. get_client_dir</h3></div></div></div><p><span class="strong"><strong>get_client_dir(snapshot_code, file_type=<span class="emphasis"><em>main</em></span>, mode=<span class="emphasis"><em>client_repo</em></span>)</strong></span></p><p>Get a dir segment from a snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code of the snapshot</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>file_type</strong></span> - each file in a snapshot is identified by a file type.</p><p>This parameter specifies which type.  Defaults to <span class="emphasis"><em>main</em></span></p><p><span class="strong"><strong>mode</strong></span> - Forces the type of folder path returned to use the value from the</p><p>appropriate tactic_&lt;SERVER_OS&gt;-conf.xml configuration file.</p><p>Values include <span class="emphasis"><em>lib</em></span>, <span class="emphasis"><em>web</em></span>, <span class="emphasis"><em>local_repo</em></span>, <span class="emphasis"><em>sandbox</em></span>, <span class="emphasis"><em>client_repo</em></span>, <span class="emphasis"><em>relative</em></span></p><p>lib = the NFS asset directory from the server point of view</p><p>web = the http asset directory from the client point of view</p><p>local_repo = the local sync of the TACTIC repository</p><p>sandbox = the local sandbox (work area) designated by TACTIC</p><p>client_repo (default) = the asset directory from the client point of view</p><p>If there is no value for win32_client_repo_dir or linux_client_repo_dir</p><p>in the config, then the value for asset_base_dir will be used instead.</p><p>relative = the relative direcory without any base</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - directory segment for a snapshot and file type</p><p><span class="strong"><strong>example:</strong></span></p><p>If the tactic_&lt;SERVER_OS&gt;-conf.xml configuration file contains the following:</p><pre class="programlisting">        &lt;win32_client_repo_dir&gt;T:/assets&lt;/win32_client_repo_dir&gt;</pre><p>and if the call to the method is as follows:</p><pre class="programlisting">        snapshot = server.create_snapshot(search_key, context)

        code = snapshot.get('code')

        server.get_path_from_snapshot(snapshot.get('code'))</pre><p>Then, on a Windows client, get_client_dir() will return:</p><pre class="programlisting">        T:/assets/sample3d/asset/chr/chr003/scenes</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_client_version"></a>13.42. get_client_version</h3></div></div></div><p><span class="strong"><strong>get_client_version()</strong></span></p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - Version of TACTIC that this client came from</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_column_info"></a>13.43. get_column_info</h3></div></div></div><p><span class="strong"><strong>get_column_info(search_type)</strong></span></p><p>Get column information of the table given a search type</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the key identifying a type of sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>return - a dictionary of info for each column</strong></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_column_names"></a>13.44. get_column_names</h3></div></div></div><p><span class="strong"><strong>get_column_names(search_type)</strong></span></p><p>This method will get all of the column names associated with a search
type</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the search type used to query the columns for</p><p><span class="strong"><strong>return</strong></span></p><p>list of columns names</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_config_definition"></a>13.45. get_config_definition</h3></div></div></div><p><span class="strong"><strong>get_config_definition(search_type, view, element_name, personal=False)</strong></span></p><p>Get the widget configuration definition for an element</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - search type that this config relates to</p><p><span class="strong"><strong>view</strong></span> - view to look for the element</p><p><span class="strong"><strong>element_name</strong></span> - name of the element</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>personal</strong></span> - True if it is a personal definition</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - xml of the configuration</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_connected_sobject"></a>13.46. get_connected_sobject</h3></div></div></div><p><span class="strong"><strong>get_connected_sobject(src_sobject, context=<span class="emphasis"><em>default</em></span>)</strong></span></p><p>Get the connected sobject</p><p><span class="strong"><strong>params</strong></span></p><p><span class="strong"><strong>src_sobject</strong></span> - the original sobject from which the connection starts</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>context</strong></span> - an arbirarty parameter which defines type of connection</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dict</strong></span> - a single connected sobject</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_connected_sobjects"></a>13.47. get_connected_sobjects</h3></div></div></div><p><span class="strong"><strong>get_connected_sobjects(src_sobject, context=<span class="emphasis"><em>default</em></span>)</strong></span></p><p>Get all of the connected sobjects</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>src_sobject</strong></span> - the original sobject from which the connection starts</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>context</strong></span> - an arbitrary parameter which defines type of connection</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - a list of connected sobjects</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_dependencies"></a>13.48. get_dependencies</h3></div></div></div><p><span class="strong"><strong>get_dependencies(snapshot_code, mode=<span class="emphasis"><em>explicit</em></span>, tag=<span class="emphasis"><em>main</em></span>, include_paths=False, include_paths_dict=False, include_files=False, repo_mode=<span class="emphasis"><em>client_repo</em></span>, show_retired=False):</strong></span></p><p>Return the dependent snapshots of a certain tag</p><p><span class="strong"><strong>params:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - unique code of a snapshot</p><p><span class="strong"><strong>keyparams:</strong></span></p><p><span class="strong"><strong>mode</strong></span> - explict (get version as defined in snapshot)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
latest
</li><li class="listitem">
current
</li></ul></div><p><span class="strong"><strong>tag</strong></span> - retrieve only dependencies that have this named tag</p><p><span class="strong"><strong>include_paths</strong></span> - flag to specify whether to include a <span class="emphasis"><em>paths</em></span> property</p><p>containing all of the paths in the dependent snapshots</p><p><span class="strong"><strong>include_paths_dict</strong></span> - flag to specify whether to include a</p><p><span class="emphasis"><em>paths_dict</em></span> property containing a dict of all paths in the</p><p>dependent snapshots</p><p><span class="strong"><strong>include_files</strong></span> - includes all of the file objects referenced in the</p><p>snapshots</p><p><span class="strong"><strong>repo_mode</strong></span> - client_repo, web, lib, relative</p><p><span class="strong"><strong>show_retired</strong></span> - defaults to False so that it doesn’t show retired dependencies</p><p><span class="strong"><strong>return:</strong></span></p><p>a list of snapshots</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_expanded_paths_from_snapshot"></a>13.49. get_expanded_paths_from_snapshot</h3></div></div></div><p><span class="strong"><strong>get_expanded_paths_from_snapshot(snapshot_code, file_type=<span class="emphasis"><em>main</em></span>)</strong></span></p><p>Return the expanded path of a snapshot (used for
ranges of files)</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code of the snapshot</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>file_type</strong></span> - each file in a snapshot is identified by a file type.</p><p>This parameter specifies which type.  Defaults to <span class="emphasis"><em>main</em></span></p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - path</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_full_snapshot_xml"></a>13.50. get_full_snapshot_xml</h3></div></div></div><p><span class="strong"><strong>get_full_snapshot_xml(snapshot_code)</strong></span></p><p>Retrieve a full snapshot xml.  This snapshot definition
contains all the information about a snapshot in xml</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - unique code of snapshot</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - the resulting snapshot xml</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_handoff_dir"></a>13.51. get_handoff_dir</h3></div></div></div><p><span class="strong"><strong>get_handoff_dir()</strong></span></p><p>Return a temporary path that files can be copied to</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - the directory to copy a file to handoff to TACTIC</p><p>without having to go through http protocol</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_home_dir"></a>13.52. get_home_dir</h3></div></div></div><p><span class="strong"><strong>get_home_dir()</strong></span></p><p>OS independent method to Get the home directory of the current user.</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - home directory</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_info_from_user"></a>13.53. get_info_from_user</h3></div></div></div><p><span class="strong"><strong>get_info_from_user(force=False)</strong></span></p><p>Get input from the user about the users environment.  Questions
asked pertain to the location of the tactic server, the project worked
on and the user’s login and password.  This information is stored in
an .&lt;login&gt;.tacticrc file.</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>force</strong></span> - if set to True, it will always ask for new infomation from the</p><p>command prompt again</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_input_tasks"></a>13.54. get_input_tasks</h3></div></div></div><p><span class="strong"><strong>get_input_tasks(search_key)</strong></span></p><p>Get the input tasks of a task based on the pipeline
associated with the sobject parent of the task</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the key identifying an sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>return:</strong></span></p><p>list of input tasks</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_interaction_count"></a>13.55. get_interaction_count</h3></div></div></div><p><span class="strong"><strong>get_interaction_count(key, category="default")</strong></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_md5_info"></a>13.56. get_md5_info</h3></div></div></div><p><span class="strong"><strong>get_md5_info(md5_list, texture_codes, new_paths, parent_code, texture_cls, file_group_dict, project_code)</strong></span></p><p>Get md5 info for a given list of texture paths, mainly returning if this md5 is a match or not
<span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>md5_list</strong></span> - md5_list</p><p><span class="strong"><strong>new_paths</strong></span> - list of file_paths</p><p><span class="strong"><strong>parent_code</strong></span> - parent code</p><p><span class="strong"><strong>texture_cls</strong></span> - Texture or ShotTexture</p><p><span class="strong"><strong>file_group_dict</strong></span> - file group dictionary storing all the file groups</p><p><span class="strong"><strong>project_code</strong></span> - project_code</p><p><span class="strong"><strong>mode</strong></span> - texture matching mode (md5, file_name)</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - a dictionary of path and a subdictionary of is_match, repo_file_code, repo_path, repo_file_range</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_output_tasks"></a>13.57. get_output_tasks</h3></div></div></div><p><span class="strong"><strong>get_output_tasks(search_key)</strong></span></p><p>Get the output tasks of a task based on the pipeline
associated with the sobject parent of the task</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the key identifying an sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>return:</strong></span></p><p>list of output tasks</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_parent"></a>13.58. get_parent</h3></div></div></div><p><span class="strong"><strong>get_parent(search_key, columns=[],  show_retired=True)</strong></span></p><p>Get the parent of an sobject.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>columns</strong></span> - the columns that will be returned in the sobject</p><p><span class="strong"><strong>show_retired</strong></span> - it defaults to False so it does not show retired parent if that’s the case</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the parent sobject</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_parent_type"></a>13.59. get_parent_type</h3></div></div></div><p><span class="strong"><strong>get_parent_type(search_key)</strong></span></p><p>Get of the parent search type</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - a list of child search_types</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_path_from_snapshot"></a>13.60. get_path_from_snapshot</h3></div></div></div><p><span class="strong"><strong>get_path_from_snapshot(snapshot_code, file_type=<span class="emphasis"><em>main</em></span>, mode=<span class="emphasis"><em>client_repo</em></span>)</strong></span></p><p>Get a full path from a snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the unique code / search_key of the snapshot</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>file_type</strong></span> - each file in a snapshot is identified by a file type.</p><p>This parameter specifies which type.  Defaults to <span class="emphasis"><em>main</em></span></p><p><span class="strong"><strong>mode</strong></span> - Forces the type of folder path returned to use the value from the</p><p>appropriate tactic_&lt;SERVER_OS&gt;-conf.xml configuration file.</p><p>Values include <span class="emphasis"><em>lib</em></span>, <span class="emphasis"><em>web</em></span>, <span class="emphasis"><em>local_repo</em></span>, <span class="emphasis"><em>sandbox</em></span>, <span class="emphasis"><em>client_repo</em></span>, <span class="emphasis"><em>relative</em></span></p><p>lib = the NFS asset directory from the server point of view</p><p>web = the http asset directory from the client point of view</p><p>local_repo = the local sync of the TACTIC repository</p><p>sandbox = the local sandbox (work area) designated by TACTIC</p><p>client_repo (default) = the asset directory from the client point of view</p><p>If there is no value for win32_client_repo_dir or linux_client_repo_dir</p><p>in the config, then the value for asset_base_dir will be used instead.</p><p>relative = the relative direcory without any base</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - the directory to copy a file to handoff to Tactic without having to</p><p>go through http protocol</p><p><span class="strong"><strong>example:</strong></span></p><p>If the tactic_&lt;SERVER_OS&gt;-conf.xml configuration file contains the following:</p><pre class="programlisting">        &lt;win32_client_repo_dir&gt;T:/assets&lt;/win32_client_repo_dir&gt;</pre><p>and if the call to the method is as follows:</p><pre class="programlisting">        snapshot = server.create_snapshot(search_key, context)

        code = snapshot.get('code')

        server.get_path_from_snapshot(snapshot.get('code'))



        # in a trigger

        snapshot_key = my.get_input_value("search_key")

        server.get_path_from_snapshot(snapshot_key)</pre><p>Then, on a Windows client, get_path_from_snapshot() will return:</p><pre class="programlisting">        T:/assets/sample3d/asset/chr/chr003/scenes/chr003_rig_v003.txt</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_paths"></a>13.61. get_paths</h3></div></div></div><p><span class="strong"><strong>get_paths( search_key, context="publish", version=-1, file_type=<span class="emphasis"><em>main</em></span>, level_key=None, single=False, versionless=False)</strong></span></p><p>Get paths from an sobject</p><p><span class="strong"><strong>params:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>keyparams:</strong></span></p><p><span class="strong"><strong>context</strong></span> - context of the snapshot</p><p><span class="strong"><strong>version</strong></span> - version of the snapshot</p><p><span class="strong"><strong>file_type</strong></span> - file type defined for the file node in the snapshot</p><p><span class="strong"><strong>level_key</strong></span> - the unique identifier of the level that this</p><p>was checked into</p><p><span class="strong"><strong>single</strong></span> - If set to True, the first of each path set is returned</p><p><span class="strong"><strong>versionless</strong></span> - boolean to return the versionless snapshot, which takes a version of -1 (latest)  or 0 (current)</p><p><span class="strong"><strong>process</strong></span> - the process of the snapshot</p><p><span class="strong"><strong>return</strong></span></p><p>A dictionary of lists representing various paths.  The paths returned</p><p>are as follows:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
client_lib_paths: all the paths to the repository relative to the client
</li><li class="listitem">
lib_paths: all the paths to the repository relative to the server
</li><li class="listitem">
sandbox_paths: all of the paths mapped to the sandbox
</li><li class="listitem">
web: all of the paths relative to the http server
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_pipeline_processes"></a>13.62. get_pipeline_processes</h3></div></div></div><p><span class="strong"><strong>get_pipeline_processes(search_key, recurse=False)</strong></span></p><p>DEPRECATED: use get_pipeline_processes_info()</p><p>Retrieve the pipeline processes information of a specific sobject.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>keyparams:</strong></span></p><p><span class="strong"><strong>recurse</strong></span> - boolean to control whether to display sub pipeline processes</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list</strong></span> - process names of the pipeline</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_pipeline_processes_info"></a>13.63. get_pipeline_processes_info</h3></div></div></div><p><span class="strong"><strong>get_pipeline_processes_info(search_key, recurse=False, related_process=None)</strong></span></p><p>Retrieve the pipeline processes information of a specific sobject. It provides information from the perspective of a particular process if related_process is specified.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>keyparams:</strong></span></p><p><span class="strong"><strong>recurse</strong></span> - boolean to control whether to display sub pipeline processes</p><p><span class="strong"><strong>related_process</strong></span> - given a process, it shows the input and output processes and contexts</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - process names of the pipeline or a dictionary if related_process is specified</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_pipeline_xml"></a>13.64. get_pipeline_xml</h3></div></div></div><p><span class="strong"><strong>get_pipeline_xml(search_key)</strong></span></p><p>DEPRECATED: use get_pipeline_xml_info()</p><p>Retrieve the pipeline of a specific sobject.  The pipeline
return is an xml document and an optional dictionary of information.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - xml and the optional hierarachy info</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_pipeline_xml_info"></a>13.65. get_pipeline_xml_info</h3></div></div></div><p><span class="strong"><strong>get_pipeline_xml_info(search_key, include_hierarchy=False)</strong></span></p><p>Retrieve the pipeline of a specific sobject.  The pipeline
returned is an xml document and an optional dictionary of information.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>include_hierarchy</strong></span> - include a list of dictionary with key info on each process of the pipeline</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - xml and the optional hierarachy info</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_plugin_dir"></a>13.66. get_plugin_dir</h3></div></div></div><p><span class="strong"><strong>get_plugin_dir(plugin)</strong></span></p><p>Return the web path for the specfied plugin</p><p><span class="strong"><strong>params:</strong></span></p><p><span class="strong"><strong>plugin</strong></span> - plugin name</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - the web path for the specified plugin</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_preallocated_path"></a>13.67. get_preallocated_path</h3></div></div></div><p><span class="strong"><strong>get_preallocated_path(snapshot_code, file_type=<span class="emphasis"><em>main</em></span>, file_name=<span class="emphasis"><em>', mkdir=True, protocol='client_repo</em></span>, ext=<span class="emphasis"><em>', checkin_type='strict</em></span>)</strong></span></p><p>Get the preallocated path for this snapshot.  It assumes that
this checkin actually exists in the repository and will create virtual
entities to simulate a checkin.  This method can be used to determine
where a checkin will go.  However, the snapshot must exist
using create_snapshot() or some other method.  For a pure virtual naming
simulator, use get_virtual_snapshot_path().</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - the code of a preallocated snapshot.  This can be</p><p>create by get_snapshot()</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>file_type</strong></span> - the type of file that will be checked in.  Some naming</p><p>conventions make use of this information to separate directories</p><p>for different file types</p><p><span class="strong"><strong>file_name</strong></span> - the desired file name of the preallocation.  This information</p><p>may be ignored by the naming convention or it may use this as a</p><p>base for the final file name</p><p><span class="strong"><strong>mkdir</strong></span> - an option which determines whether the directory of the</p><p>preallocation should be created</p><p><span class="strong"><strong>protocol</strong></span> - It’s either client_repo, sandbox, or None. It determines whether the</p><p>path is from a client or server perspective</p><p><span class="strong"><strong>ext</strong></span> - force the extension of the file name returned</p><p><span class="strong"><strong>checkin_type</strong></span> - strict, auto , or '' can be used.. A naming entry in the naming, if found,  will be used to determine the checkin type</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - the path where add_file() expects the file to be checked into</p><p><span class="strong"><strong>example:</strong></span></p><p>it saves time if you get the path and copy it to the final destination first.</p><pre class="programlisting">        snapshot = my.server.create_snapshot(search_key, context)

        snapshot_code = snapshot.get('code')

        file_name = 'input_file_name.txt'

        orig_path = 'C:/input_file_name.txt'

        path = my.server.get_preallocated_path(snapshot_code, file_type, file_name)



        # the path where it is supposed to go is generated

        new_dir = os.path.dirname(path)

        if not os.path.exists(new_dir):

            os.makedirs(new_dir)

        shutil.copy(orig_path, path)

        my.server.add_file(snapshot_code, path, file_type, mode='preallocate')</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_related_types"></a>13.68. get_related_types</h3></div></div></div><p><span class="strong"><strong>get_related_types(search_type)</strong></span></p><p>Get related search types given a search type</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the key identifying a type of sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>return - list of search_types</strong></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_resource_path"></a>13.69. get_resource_path</h3></div></div></div><p><span class="strong"><strong>get_resource_path(login=None)</strong></span></p><p>Get the resource path of the current user. It differs from
create_resource_paths() which actually create dir. The resource path
identifies the location of the file which is used to cache connection information.
An exmple of the contents is shown below:</p><pre class="programlisting">        login=admin

        server=localhost

        ticket=30818057bf561429f97af59243e6ef21

        project=unittest

        site=vfx_site</pre><p>The contents in the resource file represent the defaults to use
when connection to the TACTIC server, but may be overriden by the
API methods: set_ticket(), set_server(), set_project() or the
environment variables: TACTIC_TICKET, TACTIC_SERVER, and TACTIC_PROJECT</p><p>Typically this method is not explicitly called by API developers and
is used automatically by the API server stub. It attempts to get from
home dir first and then from temp_dir is it fails.</p><p>The site key is optional and used for a portal setup.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>login (optional)</strong></span> - login code. If not provided, it gets the current system user</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - resource file path</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_server_api_version"></a>13.70. get_server_api_version</h3></div></div></div><p><span class="strong"><strong>get_server_api_version()</strong></span></p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - server API version</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_server_version"></a>13.71. get_server_version</h3></div></div></div><p><span class="strong"><strong>get_server_version()</strong></span></p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - server version</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_snapshot"></a>13.72. get_snapshot</h3></div></div></div><p><span class="strong"><strong>get_snapshot(search_key, context="publish", version=<span class="emphasis"><em>-1</em></span>, level_key=None, include_paths=False, include_full_xml=False, include_paths_dict=False, include_files=False, include_web_paths_dict=False, versionless=False)</strong></span></p><p>Method to retrieve an sobject’s snapshot
Retrieve the latest snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - unique identifier of sobject whose snapshot we are</p><p>looking for</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>process</strong></span> - the process of the snapshot</p><p><span class="strong"><strong>context</strong></span> - the context of the snapshot</p><p><span class="strong"><strong>version</strong></span> - snapshot version</p><p><span class="strong"><strong>revision</strong></span> - snapshot revision</p><p><span class="strong"><strong>level_key</strong></span> - the unique identifier of the level in the form of a search key</p><p><span class="strong"><strong>include_paths</strong></span> - flag to include a list of paths to the files in this</p><p>snapshot.</p><p><span class="strong"><strong>include_full_xml</strong></span> - whether to include full xml in the return</p><p><span class="strong"><strong>include_paths_dict</strong></span> - flag to specify whether to include a</p><p><span class="emphasis"><em>paths_dict</em></span> property containing a dict of all paths in the</p><p>dependent snapshots</p><p><span class="strong"><strong>include_web_paths_dict</strong></span> - flag to specify whether to include a</p><p><span class="emphasis"><em>web_paths_dict</em></span> property containing a dict of all web paths in</p><p>the returned snapshots</p><p><span class="strong"><strong>include_files</strong></span> - includes all of the file objects referenced in the</p><p>snapshots</p><p><span class="strong"><strong>versionless</strong></span> - boolean to return the versionless snapshot, which takes a version of -1 (latest)  or 0 (current)</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the resulting snapshot</p><p><span class="strong"><strong>example:</strong></span></p><pre class="programlisting">            search_key = 'prod/asset?project=sample3d&amp;code=chr001'

            snapshot = server.get_snapshot(search_key, context='icon', include_files=True)</pre><pre class="programlisting">            # get the versionless snapshot

            search_key = 'prod/asset?project=sample3d&amp;code=chr001'

            snapshot = server.get_snapshot(search_key, context='anim', include_paths_dict=True, versionless=True)</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_table_info"></a>13.73. get_table_info</h3></div></div></div><p><span class="strong"><strong>get_table_info(search_type)</strong></span></p><p>Get column information of the table given a search type</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the key identifying a type of sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>return - a dictionary of info for each column</strong></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_ticket"></a>13.74. get_ticket</h3></div></div></div><p><span class="strong"><strong>get_ticket(login, password, site=None)</strong></span></p><p>Get an authentication ticket based on a login and password.
This function first authenticates the user and the issues a ticket.
The returned ticket is used on subsequent calls to the client api</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>login</strong></span> - the user that is used for authentications</p><p><span class="strong"><strong>password</strong></span> - the password of that user</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>site</strong></span> - name of the site used in a portal setup</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - ticket key</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_types_from_instance"></a>13.75. get_types_from_instance</h3></div></div></div><p><span class="strong"><strong>get_types_from_instance(instance_type)</strong></span></p><p>Get the connector types from an instance type</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>instance_type</strong></span> - the search type of the instance</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>tuple</strong></span> - (from_type, parent_type)</p><p>a tuple with the from_type and the parent_type.  The from_type is</p><p>the connector type and the parent type is the search type of the</p><p>parent of the instance</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_unique_sobject"></a>13.76. get_unique_sobject</h3></div></div></div><p><span class="strong"><strong>get_unique_sobject(search_type, data={})</strong></span></p><p>This is a special convenience function which will query for an
sobject and if it doesn’t exist, create it.  It assumes that this
object should exist and spares the developer the logic of having to
query for the sobject, test if it doesn’t exist and then create it.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the type of the sobject</p><p><span class="strong"><strong>data</strong></span> - a dictionary of name/value pairs that uniquely identify this</p><p>sobject</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>sobject</strong></span> - unique sobject matching the critieria in data</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_virtual_snapshot_path"></a>13.77. get_virtual_snapshot_path</h3></div></div></div><p><span class="strong"><strong>get_virtual_snapshot_path(search_key, context, snapshot_type="file", level_key=None, file_type=<span class="emphasis"><em>main</em></span>, file_name=<span class="emphasis"><em>', mkdirs=False, protocol='client_repo</em></span>, ext=<span class="emphasis"><em>', checkin_type='strict</em></span>)</strong></span></p><p>Create a virtual snapshot and returns a path that this snapshot
would generate through the naming conventions.  This is most useful
testing naming conventions.</p><p><span class="strong"><strong>param:</strong></span></p><p>snapshot creation:</p><pre class="screen">*search_key* - a unique identifier key representing an sobject

*context* - the context of the checkin



*keyparam:*

*snapshot_type* - [optional] descibes what kind of a snapshot this is.

More information about a snapshot type can be found in the

prod/snapshot_type sobject

*description* - [optional] optional description for this checkin

*level_key* - the unique identifier of the level that this

is to be checked into



*keyparam:*

path creation:</pre><p><span class="strong"><strong>file_type</strong></span> - the type of file that will be checked in.  Some naming</p><p>conventions make use of this information to separate directories</p><p>for different file types</p><p><span class="strong"><strong>file_name</strong></span> - the desired file name of the preallocation.  This information</p><p>may be ignored by the naming convention or it may use this as a</p><p>base for the final file name</p><p><span class="strong"><strong>mkdir</strong></span> - an option which determines whether the directory of the</p><p>preallocation should be created</p><p><span class="strong"><strong>protocol</strong></span> - It’s either client_repo, sandbox, or None. It determines whether the</p><p>path is from a client or server perspective</p><p><span class="strong"><strong>ext</strong></span> - force the extension of the file name returned</p><p><span class="strong"><strong>checkin_type</strong></span> - strict, auto, '' can be used to preset the checkin_type</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - path as determined by the naming conventions</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_widget"></a>13.78. get_widget</h3></div></div></div><p><span class="strong"><strong>get_widget(class_name, args={}, values={})</strong></span></p><p>Get a defined widget</p><p><span class="strong"><strong>params:</strong></span></p><p><span class="strong"><strong>class_name</strong></span> - the fully qualified class name of the widget</p><p><span class="strong"><strong>keyparams:</strong></span></p><p><span class="strong"><strong>args</strong></span> - keyword arguments required to create a specific widget</p><p><span class="strong"><strong>values</strong></span> - form values that are passed in from the interface</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - html form of the widget</p><p><span class="strong"><strong>example:</strong></span></p><p>class_name = <span class="emphasis"><em>tactic.ui.panel.TableLayoutWdg</em></span></p><p>args = {</p><p><span class="emphasis"><em>view</em></span>: <span class="emphasis"><em>task_list</em></span>,</p><p><span class="emphasis"><em>search_type</em></span>: <span class="emphasis"><em>sthpw/task</em></span>,</p><p>}</p><p>filter =  [{"prefix":"main_body","main_body_enabled":"on","main_body_column":"project_code","main_body_relation":"is","main_body_value":"{$PROJECT}"}, {"prefix":"main_body","main_body_enabled":"on","main_body_column":"search_type","main_body_relation":"is not","main_body_value":"sthpw/project"}]</p><p>from simplejson import dumps</p><p>values  = {<span class="emphasis"><em>json</em></span>: dumps(filter)}</p><p>widget_html = server.get_widget(class_name, args, values)</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_group_checkin"></a>13.79. group_checkin</h3></div></div></div><p><span class="strong"><strong>group_checkin(search_key, context, file_path, file_range, snapshot_type="sequence", description="", file_type=<span class="emphasis"><em>main</em></span>, metadata={}, mode=None, is_revision=False, info={} )</strong></span></p><p>Check in a range of files.  A range of file is defined as any group
of files that have some sequence of numbers grouping them together.
An example of this includes a range frames that are rendered.</p><p>Although it is possible to add each frame in a range using add_file,
adding them as as sequence is lightweight, often significantly reducing
the number of database entries required.  Also, it is understood that
test files form a range of related files, so that other optimizations
and manipulations can be operated on these files accordingly.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>file_path</strong></span> - expression for file range: ./blah.##.jpg</p><p><span class="strong"><strong>file_type</strong></span> - the typ of file this is checked in as. Default = <span class="emphasis"><em>main</em></span></p><p><span class="strong"><strong>file_range</strong></span> - string describing range of frames in the form <span class="emphasis"><em>1-5/1</em></span></p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>snapshot_type</strong></span> - type of snapshot this checkin will have</p><p><span class="strong"><strong>description</strong></span> - description related to this checkin</p><p><span class="strong"><strong>file_type</strong></span> - the type of file that will be associated with this group</p><p><span class="strong"><strong>metadata</strong></span> - add metadata to snapshot</p><p><span class="strong"><strong>mode</strong></span> - determines whether the files passed in should be copied, moved</p><p>or uploaded.  By default, this is a manual process (for backwards</p><p>compatibility)</p><p><span class="strong"><strong>is_revision</strong></span> - flag to set this as a revision instead of a version</p><p><span class="strong"><strong>info</strong></span> - dict of info to pass to the ApiClientCmd</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - snapshot</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_insert"></a>13.80. insert</h3></div></div></div><p><span class="strong"><strong>insert(search_type, data, metadata={}, parent_key=None,  info={}, use_id=False, triggers=True)</strong></span></p><p>General insert for creating a new sobject</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the search_type attribute of the sType</p><p><span class="strong"><strong>data</strong></span> - a dictionary of name/value pairs which will be used to update</p><p>the sobject defined by the search_key.</p><p><span class="strong"><strong>parent_key</strong></span> - set the parent key for this sobject</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>metadata</strong></span> - a dictionary of values that will be stored in the metadata attribute</p><p>if available</p><p><span class="strong"><strong>info</strong></span> - a dictionary of info to pass to the ApiClientCmd</p><p><span class="strong"><strong>use_id</strong></span> - use id in the returned search key</p><p><span class="strong"><strong>triggers</strong></span> - boolean to fire trigger on insert</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - represent the sobject with it’s current data</p><p><span class="strong"><strong>example:</strong></span></p><p>insert a new asset</p><pre class="programlisting">        search_type = "prod/asset"



        data = {

            'code': chr001,

            'description': 'Main Character'

        }



        server.insert( search_type, data )</pre><p>insert a new note with a shot parent</p><pre class="programlisting">        # get shot key

        shot_key = server.build_search_key(search_type='prod/shot',code='XG001')



        data = {

            'context': 'model',

            'note': 'This is a modelling note',

            'login': server.get_login()

        }



        server.insert( search_type, data, parent_key=shot_key)</pre><p>insert a note without firing triggers</p><pre class="programlisting">        search_type = "sthpw/note"



        data = {

            'process': 'roto',

            'context': 'roto',

            'note': 'The keys look good.',

            'project_code': 'art'

        }



        server.insert( search_type, data, triggers=False )</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_insert_multiple"></a>13.81. insert_multiple</h3></div></div></div><p><span class="strong"><strong>insert_multiple(data, metadata=[], parent_key=None, use_id=False, triggers=True)</strong></span></p><p>Insert for several sobjects in one function call.  The
data structure contains all the infon needed to update and is
formated as follows:</p><p>data = [
{ column1: value1, column2: value2,  column3: value3 },
{ column1: value1, column2: value2,  column3: value3 }
}</p><p>metadata =  [
{ color: blue, height: 180 },
{ color: orange, height: 170 }
]</p><p><span class="strong"><strong>params:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the search_type attribute of the sType</p><p><span class="strong"><strong>data</strong></span> - a dictionary of name/value pairs which will be used to update</p><p>the sobject defined by the search_key</p><p>Note: this can also be an array.  Each data dictionary element in</p><p>the array will be applied to the corresponding search key</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>parent_key</strong></span> - set the parent key for this sobject</p><p><span class="strong"><strong>use_id</strong></span> - boolean to control if id is used in the search_key in returning sobject dict</p><p><span class="strong"><strong>triggers</strong></span> - boolean to fire trigger on insert</p><p><span class="strong"><strong>return:</strong></span></p><p>a list of all the inserted sobjects</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_insert_update"></a>13.82. insert_update</h3></div></div></div><p><span class="strong"><strong>insert_update(search_key, data, metadata={}, parent_key=None, info={}, use_id=False, triggers=True)</strong></span></p><p>Insert if the entry does not exist, update otherwise</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject.</p><p><span class="strong"><strong>data</strong></span> - a dictionary of name/value pairs which will be used to update</p><p>the sobject defined by the search_key</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>metadata</strong></span> - a dictionary of values that will be stored in the metadata attribute if available</p><p><span class="strong"><strong>parent_key</strong></span> - set the parent key for this sobject</p><p><span class="strong"><strong>info</strong></span> - a dictionary of info to pass to the ApiClientCmd</p><p><span class="strong"><strong>use_id</strong></span> - use id in the returned search key</p><p><span class="strong"><strong>triggers</strong></span> - boolean to fire trigger on insert</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - represent the sobject with its current data.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_log"></a>13.83. log</h3></div></div></div><p><span class="strong"><strong>log(level, message, category="default")</strong></span></p><p>Log a message in the logging queue.  It is often difficult to see output
of a trigger unless you are running the server in debug mode.
In production mode, the server sends the output to log files.
The log files are general buffered.
It cannot be predicted exactly when buffered output will be dumped to a file.</p><p>This log() method will make a request to the server.
The message will be immediately stored in the database in the debug log table.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>level - critical|error|warning|info|debug</strong></span> - arbitrary debug level category</p><p><span class="strong"><strong>message</strong></span> - freeform string describing the entry</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>category</strong></span> - a label for the type of message being logged.</p><p>It defaults to "default"</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_log_message"></a>13.84. log_message</h3></div></div></div><p><span class="strong"><strong>log_message(key, message, status=None, category="default")</strong></span></p><p>Log a message which will be seen by all who are subscribed to
the message "key".  Messages are often JSON strings of data.</p><p><span class="strong"><strong>params</strong></span></p><p><span class="strong"><strong>key</strong></span> - unique key for this message</p><p><span class="strong"><strong>message</strong></span> - the message to be sent</p><p><span class="strong"><strong>keyparam</strong></span></p><p><span class="strong"><strong>status</strong></span> - arbitrary status for this message</p><p><span class="strong"><strong>category</strong></span> - value to categorize this message</p><p><span class="strong"><strong>return</strong></span></p><p><span class="strong"><strong>string</strong></span> - "OK"</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_query"></a>13.85. query</h3></div></div></div><p><span class="strong"><strong>query(search_type, filters=[], columns=[], order_bys=[], show_retired=False, limit=None, offset=None, single=False, distinct=None, return_sobjects=False)</strong></span></p><p>General query for sobject information</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - the key identifying a type of sobject as registered in</p><p>the search_type table.</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>filters</strong></span> -  an array of filters to alter the search</p><p><span class="strong"><strong>columns</strong></span> -  an array of columns whose values should be</p><p>retrieved</p><p><span class="strong"><strong>order_bys</strong></span> -  an array of order_by to alter the search</p><p><span class="strong"><strong>show_retired</strong></span> - sets whether retired sobjects are also</p><p>returned</p><p><span class="strong"><strong>limit</strong></span> - sets the maximum number of results returned</p><p><span class="strong"><strong>single</strong></span> - returns only a single object</p><p><span class="strong"><strong>distinct</strong></span> - specify a distinct column</p><p><span class="strong"><strong>return_sobjects</strong></span> - return sobjects instead of dictionary.  This</p><p>works only when using the API on the server.</p><p><span class="strong"><strong>parent_key</strong></span> - filter to specify a parent sobject</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>list of dictionary/sobjects</strong></span> - Each array item represents an sobject</p><p>and is a dictionary of name/value pairs</p><p><span class="strong"><strong>example:</strong></span></p><pre class="programlisting">            filters = []

            filters.append( ("code", "XG002") )

            order_bys = ['timestamp desc']

            columns = ['code']

            server.query(ticket, "prod/shot", filters, columns, order_bys)</pre><p>The arguments "filters", "columns", and "order_bys" are optional</p><p>The "filters" argument is a list.  Each list item represents an</p><p>individual filter.  The forms are as follows:</p><pre class="programlisting">        (column, value)             -&gt; where column = value

        (column, (value1,value2))   -&gt; where column in (value1, value2)

        (column, op, value)         -&gt; where column op value

            where op is ('like', '&lt;=', '&gt;=', '&gt;', '&lt;', 'is', '~', '!~','~*','!~*)

        (value)                     -&gt; where value</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_query_snapshots"></a>13.86. query_snapshots</h3></div></div></div><p><span class="strong"><strong>query_snapshots(filters=None, columns=None, order_bys=[], show_retired=False, limit=None, offset=None, single=False, include_paths=False, include_full_xml=False, include_paths_dict=False, include_parent=False, include_files=False, include_web_paths=False)</strong></span></p><p>thin wrapper around query, but is specific to querying snapshots
with some useful included flags that are specific to snapshots</p><p><span class="strong"><strong>params:</strong></span></p><p><span class="strong"><strong>ticket</strong></span> - authentication ticket</p><p><span class="strong"><strong>filters</strong></span> - (optional) an array of filters to alter the search</p><p><span class="strong"><strong>columns</strong></span> - (optional) an array of columns whose values should be</p><p>retrieved</p><p><span class="strong"><strong>order_bys</strong></span> - (optional) an array of order_by to alter the search</p><p><span class="strong"><strong>show_retired - (optional)</strong></span> - sets whether retired sobjects are also</p><p>returned</p><p><span class="strong"><strong>limit</strong></span> - sets the maximum number of results returned</p><p><span class="strong"><strong>single</strong></span> - returns a single sobject that is not wrapped up in an array</p><p><span class="strong"><strong>include_paths</strong></span> - flag to specify whether to include a <span class="emphasis"><em>paths</em></span> property</p><p>containing a list of all paths in the dependent snapshots</p><p><span class="strong"><strong>include_paths_dict</strong></span> - flag to specify whether to include a</p><p><span class="emphasis"><em>paths_dict</em></span> property containing a dict of all paths in the</p><p>dependent snapshots</p><p><span class="strong"><strong>include_web_paths_dict</strong></span> - flag to specify whether to include a</p><p><span class="emphasis"><em>web_paths_dict</em></span> property containing a dict of all web paths in</p><p>the returned snapshots</p><p><span class="strong"><strong>include_full_xml</strong></span> - flag to return the full xml definition of a snapshot</p><p><span class="strong"><strong>include_parent</strong></span> - includes all of the parent attributes in a <span class="emphasis"><em>parent</em></span> dictionary</p><p><span class="strong"><strong>include_files</strong></span> - includes all of the file objects referenced in the</p><p>snapshots</p><p><span class="strong"><strong>return:</strong></span></p><p>list of snapshots</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_reactivate_sobject"></a>13.87. reactivate_sobject</h3></div></div></div><p><span class="strong"><strong>reactivate_sobject(search_key)</strong></span></p><p>Invoke the reactivate method.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the unige key identifying the sobject.</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - sobject that represents values of the sobject in the</p><p>form name:value pairs</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_redo"></a>13.88. redo</h3></div></div></div><p><span class="strong"><strong>redo(transaction_ticket=None, transaction_id=None)</strong></span></p><p>Redo an operation.  If no transaction id is given, then the last
undone operation of this user on this project is redone</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>transaction_ticket</strong></span> - explicitly redo a specific transaction</p><p><span class="strong"><strong>transaction_id</strong></span> - explicitly redo a specific transaction by id</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_retire_sobject"></a>13.89. retire_sobject</h3></div></div></div><p><span class="strong"><strong>retire_sobject(search_key)</strong></span></p><p>Invoke the retire method. This is preferred over delete_sobject if
you are not sure whether other sobjects has dependency on this.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the unige key identifying the sobject.</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - sobject that represents values of the sobject in the</p><p>form name:value pairs</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_config_definition"></a>13.90. set_config_definition</h3></div></div></div><p><span class="strong"><strong>set_config_definition(search_type, element_name, config_xml="", login=None)</strong></span></p><p>Set the widget configuration definition for an element</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - search type that this config relates to</p><p><span class="strong"><strong>element_name</strong></span> - name of the element</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>config_xml</strong></span> - The configuration xml to be set</p><p><span class="strong"><strong>login</strong></span> - A user’s login name, if specifically choosing one</p><p><span class="strong"><strong>return:</strong></span></p><p>True on success, exception message on failure</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_current_snapshot"></a>13.91. set_current_snapshot</h3></div></div></div><p><span class="strong"><strong>set_current_snapshot(snapshot_code)</strong></span></p><p>Set this snapshot as a "current" snapshot</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>snapshot_code</strong></span> - unique code of snapshot</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - the resulting snapshot xml</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_widget_settings"></a>13.92. set_widget_settings</h3></div></div></div><p><span class="strong"><strong>set_widget_settings(key, value)</strong></span></p><p>Get widget setting for current user and project</p><p><span class="strong"><strong>param</strong></span></p><p><span class="strong"><strong>key</strong></span> - unique key to identify this setting</p><p><span class="strong"><strong>return</strong></span></p><p>value of setting</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_set_widget_settings_2"></a>13.93. set_widget_settings</h3></div></div></div><p><span class="strong"><strong>set_widget_settings(key, value)</strong></span></p><p>Get widget setting for current user and project</p><p><span class="strong"><strong>param</strong></span></p><p><span class="strong"><strong>key</strong></span> - unique key to identify this setting</p><p><span class="strong"><strong>return</strong></span></p><p>value of setting</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_simple_checkin"></a>13.94. simple_checkin</h3></div></div></div><p><span class="strong"><strong>simple_checkin( search_key, context, file_path, snapshot_type="file", description="No description", use_handoff_dir=False, file_type="main", is_current=True, level_key=None, breadcrumb=False, metadata={}, mode=None, is_revision=False, info={}, keep_file_name=False, create_icon=True, checkin_cls=<span class="emphasis"><em>pyasm.checkin.FileCheckin</em></span>, context_index_padding=None, checkin_type="strict", source_path=None, version=None )</strong></span></p><p>Simple method that checks in a file.</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject</p><p><span class="strong"><strong>context</strong></span> - the context of the checkin</p><p><span class="strong"><strong>file_path</strong></span> - path of the file that was previously uploaded</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>snapshot_type</strong></span> - [optional] descibes what kind of a snapshot this is.</p><p>More information about a snapshot type can be found in the</p><p>prod/snapshot_type sobject</p><p><span class="strong"><strong>description</strong></span> - [optional] optional description for this checkin</p><p><span class="strong"><strong>file_type</strong></span> - [optional] optional description for this file_type</p><p><span class="strong"><strong>is_current</strong></span> - flag to determine if this checkin is to be set as current</p><p><span class="strong"><strong>level_key</strong></span> - the unique identifier of the level that this</p><p>is to be checked into</p><p><span class="strong"><strong>breadcrumb</strong></span> - flag to leave a .snapshot breadcrumb file containing</p><p>information about what happened to a checked in file</p><p><span class="strong"><strong>metadata</strong></span> - a dictionary of values that will be stored as metadata</p><p>on the snapshot</p><p><span class="strong"><strong>mode</strong></span> - inplace, upload, copy, move</p><p><span class="strong"><strong>is_revision</strong></span> - flag to set this as a revision instead of a version</p><p><span class="strong"><strong>create_icon</strong></span> - flag to create an icon on checkin</p><p><span class="strong"><strong>info</strong></span> - dict of info to pass to the ApiClientCmd</p><p><span class="strong"><strong>keep_file_name</strong></span> - keep the original file name</p><p><span class="strong"><strong>checkin_cls</strong></span> - checkin class</p><p><span class="strong"><strong>context_index_padding</strong></span> - determines the padding used for context</p><p>indexing: ie: design/0001</p><p><span class="strong"><strong>checkin_type</strong></span> - auto or strict which controls whether to auto create versionless</p><p><span class="strong"><strong>source_path</strong></span> - explicitly give the source path</p><p><span class="strong"><strong>version</strong></span> - force a version for this check-in</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - representation of the snapshot created for this checkin</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_split_search_key"></a>13.95. split_search_key</h3></div></div></div><p><span class="strong"><strong>split_search_key(search_key)</strong></span></p><p>Convenience method to split a search_key in into its search_type and search_code/id components. Note: only accepts the new form prod/asset?project=sample3d&amp;code=chr001</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - the unique identifier of a sobject</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>tuple</strong></span> - search type, search code/id</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_start"></a>13.96. start</h3></div></div></div><p><span class="strong"><strong>start(title, description='')</strong></span></p><p>Start a transaction.  All commands using the client API are bound
in a transaction.  The combination of start(), finish() and abort()
makes it possible to group a series of API commands in a single
transaction.  The start/finish commands are not necessary for
query operations (like query(…), get_snapshot(…), etc).</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>title</strong></span> - the title of the command to be executed.  This will show up on</p><p>transaction log</p><p><span class="strong"><strong>description</strong></span> - the description of the command. This is more detailed.</p><p><span class="strong"><strong>transaction_ticket</strong></span> - optionally, one can provide the transaction ticket sequence</p><p><span class="strong"><strong>example:</strong></span></p><p>A full transaction inserting 10 shots.  If an error occurs, all 10</p><p>inserts will be aborted.</p><pre class="programlisting">        server.start('Start adding shots')

        try:

            for i in range(0,10):

                server.insert("prod/shot", { 'code': 'XG%0.3d'%i } )

        except:

            server.abort()

        else:

            server.finish("10 shots added")</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_subscribe"></a>13.97. subscribe</h3></div></div></div><p><span class="strong"><strong>subscribe(key, category="default")</strong></span></p><p>Allow a user to subscribe to this message key.  All messages
belonging to the corresponding key will be available to users
subscribed to it.</p><p><span class="strong"><strong>params</strong></span></p><p><span class="strong"><strong>key</strong></span> - unique key for this message</p><p><span class="strong"><strong>keyparam</strong></span></p><p><span class="strong"><strong>category</strong></span> - value to categorize this message</p><p><span class="strong"><strong>return</strong></span></p><p>subscription sobject</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_undo"></a>13.98. undo</h3></div></div></div><p><span class="strong"><strong>undo(transaction_ticket=None, transaction_id=None, ignore_files=False)</strong></span></p><p>undo an operation.  If no transaction id is given, then the last
operation of this user on this project is undone</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>transaction_ticket</strong></span> - explicitly undo a specific transaction</p><p><span class="strong"><strong>transaction_id</strong></span> - explicitly undo a specific transaction by id</p><p><span class="strong"><strong>ignore_files</strong></span> - flag which determines whether the files should</p><p>also be undone.  Useful for large preallcoated checkins.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_unsubscribe"></a>13.99. unsubscribe</h3></div></div></div><p><span class="strong"><strong>unsubscribe(key)</strong></span></p><p>Allow a user to unsubscribe from this message key.</p><p><span class="strong"><strong>params</strong></span></p><p><span class="strong"><strong>key</strong></span> - unique key for this message</p><p><span class="strong"><strong>return</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - the values of the subscription sobject in the</p><p>form name:value pairs</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_update"></a>13.100. update</h3></div></div></div><p><span class="strong"><strong>update(search_key, data={}, metadata={}, parent_key=None, info={}, use_id=False, triggers=True)</strong></span></p><p>General update for updating sobject</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_key</strong></span> - a unique identifier key representing an sobject.</p><p>Note: this can also be an array, in which case, the data will</p><p>be updated to each sobject represented by this search key</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>data</strong></span> - a dictionary of name/value pairs which will be used to update</p><p>the sobject defined by the search_key</p><p>Note: this can also be an array.  Each data dictionary element in</p><p>the array will be applied to the corresponding search key</p><p><span class="strong"><strong>parent_key</strong></span> - set the parent key for this sobject</p><p><span class="strong"><strong>info</strong></span> - a dictionary of info to pass to the ApiClientCmd</p><p><span class="strong"><strong>metadata</strong></span> - a dictionary of values that will be stored in the metadata attribute if available</p><p><span class="strong"><strong>use_id</strong></span> - use id in the returned search key</p><p><span class="strong"><strong>triggers</strong></span> - boolean to fire trigger on update</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>dictionary</strong></span> - represent the sobject with its current data.</p><p>If search_key is an array, This will be an array of dictionaries</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_update_config"></a>13.101. update_config</h3></div></div></div><p><span class="strong"><strong>update_config(search_type, view, element_names)</strong></span></p><p>Update the widget configuration like ordering for a view</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>search_type</strong></span> - search type that this config relates to</p><p><span class="strong"><strong>view</strong></span> - view to look for the element</p><p><span class="strong"><strong>element_names</strong></span> - element names in a list</p><p><span class="strong"><strong>return:</strong></span></p><p><span class="strong"><strong>string</strong></span> - updated config xml snippet</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_update_multiple"></a>13.102. update_multiple</h3></div></div></div><p><span class="strong"><strong>update_multiple(data, triggers=True)</strong></span></p><p>Update for several sobjects with different data in one function call.  The
data structure contains all the information needed to update and is
formated as follows:</p><p>data = {
search_key1: { column1: value1, column2: value2 }
search_key2: { column1: value1, column2: value2 }
}</p><p><span class="strong"><strong>params:</strong></span></p><p><span class="strong"><strong>data</strong></span> - data structure containing update information for all</p><p>sobjects</p><p><span class="strong"><strong>keyparam:</strong></span></p><p><span class="strong"><strong>data</strong></span> - a dictionary of name/value pairs which will be used to update</p><p>the sobject defined by the search_key</p><p>Note: this can also be an array.  Each data dictionary element in</p><p>the array will be applied to the corresponding search key</p><p><span class="strong"><strong>triggers</strong></span> - boolean to fire trigger on insert</p><p><span class="strong"><strong>return:</strong></span></p><p>None</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_upload_file"></a>13.103. upload_file</h3></div></div></div><p><span class="strong"><strong>upload_file(path)</strong></span></p><p>Use http protocol to upload a file through http</p><p><span class="strong"><strong>param:</strong></span></p><p><span class="strong"><strong>path</strong></span> - the name of the file that will be uploaded</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s12.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>