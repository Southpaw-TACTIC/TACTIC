<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Relocating the 'assets' directory</title>
      <meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2">
      <link rel="home" href="doc_tactic-sys-admin.html" title="TACTIC System Administrator">
      <link rel="up" href="tactic-sys-admin_fileserver.html" title="Fileserver">
      <link rel="prev" href="tactic-sys-admin_fileserver.html" title="Fileserver">
      <link rel="next" href="tactic-sys-admin_sys-admin_configure-remote-repo.html" title="Configure the Remote Repo">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="tactic-sys-admin_fileserver.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="tactic-sys-admin_sys-admin_configure-remote-repo.html">Next</a></td>
            </tr>
         </table>
      </div>
      <div class="section" title="Relocating the 'assets' directory">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title"><a name="tactic-sys-admin_sys-admin_relocate-assets-directory"></a>Relocating the 'assets' directory 
                  </h3>
               </div>
            </div>
         </div>
         <div class="simplesect" title="Overview">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e4429"></a>Overview
                     </h4>
                  </div>
               </div>
            </div>
            <p>proper management of assets and asset metadata are essential to managing the TACTIC
               service. Versioned assets are by far the most disk space consuming element of asset
               management. TACTIC can store its asset data in any filesystem path location. All that is
               required is that the tactic configuration file contains the path to a directory writable
                           by the TACTIC service user. 
            </p>
         </div>
         <div class="simplesect" title="Types of Access">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e4434"></a>Types of Access
                     </h4>
                  </div>
               </div>
            </div>
            <div class="itemizedlist">
               <ul class="itemizedlist">
                  <li class="listitem">
                     <p><span class="bold"><strong>Local Access</strong></span> in a simple configuration, the
                                            TACTIC service is enabled on the TACTIC host, and all assets checked in and
                                            checked out of TACTIC are stored on the local filesystem. Typically a user is
                                            created to run the TACTIC service, or an already assigned user is simply used to
                                            run the TACTIC service. 
                     </p>
                  </li>
                  <li class="listitem">
                     <p><span class="bold"><strong>Network Access</strong></span> in an addition to the simple
                                            configuration, the TACTIC service is enabled on the tactic host and all assets
                                            checked in and checked out tactic are stored on a network mount. Typically a
                                            user is created to run the TACTIC service and be able to write to the network
                                            mount. 
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="simplesect" title="Permissions">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e4448"></a>Permissions
                     </h4>
                  </div>
               </div>
            </div>
            <div class="itemizedlist">
               <ul class="itemizedlist">
                  <li class="listitem">
                     <p><span class="bold"><strong>TACTIC user permissions </strong></span>It is important to
                                            note that in a network accessible filesystem, allocation of permissions are
                                            important only for the TACTIC user.  Regular system users should not have access
                                            to the TACTIC assets directory.
                     </p>
                  </li>
                  <li class="listitem">
                     <p><span class="bold"><strong>Browsable access to assets</strong></span> During some
                                            conversions to the management of assets by TACTIC, a frequent request is for
                                            regular user access to the assets directory managed by TACTIC. There really is
                                            not the much to see in these directories as tactics naming convention for
                                            versioning of assets creates files and directories that are largely mysterious
                                            in their arrangement. 
                     </p>
                     <p>Is very important that the files that are managed by tactic are not touched by
                                            regular users. Manipulating files or directories managed by tactic will
                                            definitely result in data loss. Regular users should not have writable access to
                                            tactic asset directories. 
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="simplesect" title="Moving the current 'assets' directory">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e4464"></a>Moving the current 'assets' directory
                     </h4>
                  </div>
               </div>
            </div>
            <p>Before you begin this process, you should first move or copy your assets to their new
                           location using a network share ideally named 'assets'. For a new installation, you
                           should create an 'assets' share or directory in your new location. 
            </p>
         </div>
         <div class="simplesect" title="Rename the current 'assets' directory">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e4469"></a>Rename the current 'assets' directory
                     </h4>
                  </div>
               </div>
            </div>
            <p>In most cases, it is ideal to relocate the <code class="filename">assets</code> directory to a
                           dedicated file server. If you already have an assets directory, you can rename it to
                           "assets_temp" to break the current connection. You will know the connection is broken
                           when your asset and project thumbnails are no longer visible in the user interface. Once
                           the assets are successfully moved to the new location you will know they are accessible
                           when the assets and thumbnails are visible again. 
            </p>
            <p>In Linux, the steps to rename the current assets will be similar to the example
                           below:
            </p>
            <p>1) Navigate to the apache directory <span class="command"><strong>cd /home/apache</strong></span></p>
            <p>2) In the shell run <span class="command"><strong>mv assets assets_bak</strong></span></p>
            <p>3) If you run <span class="command"><strong>ls -la</strong></span>, you should get a listing confirming the
                           change 
            </p>
            <div class="mediaobject"><img src="media/renameAssetsToAssetsBak.png"></div>
            <p>4) To confirm the operation was successful, log in to TACTIC and you should find that
                           none of the thumbnails or assets are available.
            </p>
         </div>
         <div class="simplesect" title="Edit the TACTIC configuration file">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e4497"></a>Edit the TACTIC configuration file
                     </h4>
                  </div>
               </div>
            </div>
            <p>The config file is named differently on each operating system:</p>
            <div class="informaltable">
               <table border="1">
                  <colgroup>
                     <col width="150px">
                     <col width="100px">
                     <col>
                  </colgroup>
                  <thead>
                     <tr>
                        <th>Filename</th>
                        <th>Operating System</th>
                        <th>Location</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td>tactic_win32-conf.xml</td>
                        <td>Windows</td>
                        <td>TACTIC_INSTALL_DIR/projects/config</td>
                     </tr>
                     <tr>
                        <td>tactic_linux-conf.xml</td>
                        <td>Linux</td>
                        <td>TACTIC_INSTALL_DIR/projects/config</td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p><span class="bold"><strong>Updating the tactic_linux-conf.xml file
                                 (Linux)</strong></span></p>
            <p>In the <code class="filename">&lt;checkin/&gt;</code> tag in the
                               <code class="filename">tactic_linux-conf.xml</code> config file, the
                               <code class="filename">asset_base_dir</code> location defines where assets are stored by
                           TACTIC. This location could be on the TACTIC server (the default is
                               <code class="filename">/home/apache/assets</code>), or preferably on a network shared drive. 
            </p>
            <p>This path is defined from the perspective of the TACTIC server. An example of this
                           entry where it looks to a share on another server would be:
            </p>
            <p>
                           
            </p><pre class="screen">asset_base_dir="/home/apache/assets"</pre><p>
                       
            </p>
            <p>This location on the server would be mounted to the central assets server which in
                           this case would be:
            </p><pre class="screen">//192.168.0.105/assets</pre><p>This share would have to allow the 'apache' user (which is TACTIC) to read and write
                           to it.
            </p>
            <p>There are also two variables that need to be set in the following Apache config
                           file:
            </p>
            <p><code class="filename">/etc/httpd/conf.d/tactic.conf</code></p>
            <p><span class="bold"><strong>Change this:</strong></span></p><pre class="screen">&lt;Directory "/home/apache/assets" &gt;
    Options FollowSymLinks
    AllowOverride None
    Order Allow,Deny
    Allow from All
&lt;/Directory&gt;
</pre><p><span class="bold"><strong>To:</strong></span></p><pre class="screen">&lt;Directory "/mnt/d1/tactic/assets" &gt;
    Options FollowSymLinks
    AllowOverride None
    Order Allow,Deny
    Allow from All
    <span class="bold"><strong>EnableSendfile Off
    EnableMMAP Off</strong></span>
&lt;/Directory&gt;</pre><p>You will also need to change the assets alias further down in the config file:</p>
            <p><span class="bold"><strong>Change this:</strong></span></p><pre class="screen">Alias /assets "/home/apache/assets"</pre><p><span class="bold"><strong>To:</strong></span></p><pre class="screen">Alias /assets "<span class="bold"><strong>/mnt/d1/tactic/assets</strong></span>"</pre><p>For the <code class="filename">win32_client_repo_dir</code> location, it should include the
                               <code class="filename">asset_base_dir</code> path as seen by the client machine. For example,
                           suppose the <code class="filename">asset_base_dir</code> path is "/home/apache/assets" on a Linux
                           box. However, from a Windows client, it is mapped as: 
            </p>
            <p>"Z:/assets" or "//192.168.0.105/assets" </p>
            <p>The <code class="filename">win32_client_repo_dir</code> location would then be:
            </p>
            <p>win32_client_repo_dir="//192.168.0.105/assets"</p>
            <p>The linux_client_repo_dir location is analogous to win32_client_repo_dir, except it is
                           meant for a Linux client.
            </p>
            <p><span class="bold"><strong>Updating the tactic_win32-conf.xml file
                                 (Windows)</strong></span></p>
            <p>In the <code class="filename">&lt;checkin/&gt;</code> tag in the
                               <code class="filename">tactic_linux-conf.xml</code> config file, the
                               <code class="filename">asset_base_dir</code> location defines where assets are stored by
                           TACTIC. This location could be on the TACTIC server (the default is
                               <code class="filename">/home/apache/assets</code>), or preferably on a network shared drive. 
            </p>
            <p>This path is defined from the perspective of the TACTIC server. An example of this
                           entry where it looks to a share on another server would be:
            </p>
            <p>
                           
            </p><pre class="screen">asset_base_dir="/home/apache/assets"</pre><p>
                       
            </p>
            <p>This location on the server would be mounted to the central assets server which in
                           this case would be:
            </p><pre class="screen">//192.168.0.105/assets</pre><p>This share would have to allow the 'apache' user (which is TACTIC) to read and write
                           to it.
            </p>
            <p>There are also two variables that need to be set in the following Apache config
                           file:
            </p>
            <p><code class="filename">/etc/httpd/conf.d/tactic.conf</code></p>
            <p><span class="bold"><strong>Change this:</strong></span></p><pre class="screen">&lt;Directory "/home/apache/assets" &gt;
    Options FollowSymLinks
    AllowOverride None
    Order Allow,Deny
    Allow from All
&lt;/Directory&gt;
</pre><p><span class="bold"><strong>To:</strong></span></p><pre class="screen">&lt;Directory "/mnt/d1/tactic/assets" &gt;
    Options FollowSymLinks
    AllowOverride None
    Order Allow,Deny
    Allow from All
    <span class="bold"><strong>EnableSendfile Off
    EnableMMAP Off</strong></span>
&lt;/Directory&gt;</pre><p>You will also need to change the assets alias further down in the config file:</p>
            <p><span class="bold"><strong>Change this:</strong></span></p><pre class="screen">Alias /assets "/home/apache/assets"</pre><p><span class="bold"><strong>To:</strong></span></p><pre class="screen">Alias /assets "<span class="bold"><strong>/mnt/d1/tactic/assets</strong></span>"</pre><p>For the <code class="filename">win32_client_repo_dir</code> location, it should include the
                               <code class="filename">asset_base_dir</code> path as seen by the client machine. For example,
                           suppose the <code class="filename">asset_base_dir</code> path is "/home/apache/assets" on a Linux
                           box. However, from a Windows client, it is mapped as: 
            </p>
            <p>"Z:/assets" or "//192.168.0.105/assets" </p>
            <p>The <code class="filename">win32_client_repo_dir</code> location would then be:
            </p>
            <p>win32_client_repo_dir="//192.168.0.105/assets"</p>
            <p>The linux_client_repo_dir location is analogous to win32_client_repo_dir, except it is
                           meant for a Linux client.
            </p>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="tactic-sys-admin_fileserver.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="tactic-sys-admin_fileserver.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="tactic-sys-admin_sys-admin_configure-remote-repo.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="doc_tactic-sys-admin.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;</td>
            </tr>
         </table>
      </div>
   </body>
</html>